<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>부동산 중개수수료 계산기</title>
<style>
 body { font-family: system-ui, sans-serif; margin: 20px; background:#f9f9f9; }
 h1 { margin-bottom: 20px; }
 .card { background:#fff; padding:20px; border-radius:12px; max-width:500px; box-shadow:0 2px 6px rgba(0,0,0,0.1); margin:auto; }
 label { display:block; margin-top:12px; font-weight:bold; }
 input, select { width:100%; padding:8px; margin-top:6px; border:1px solid #ccc; border-radius:6px; }
 button { margin-top:20px; width:100%; padding:12px; background:#007bff; color:#fff; border:none; border-radius:6px; font-size:16px; cursor:pointer; }
 button:hover { background:#0056b3; }
 .result { margin-top:20px; padding:15px; background:#eef; border-radius:6px; font-weight:bold; }
</style>
</head>
<body>
<div class="card">
  <h1>부동산 중개수수료 계산기</h1>
  
  <label>거래 유형</label>
  <select id="dealType">
    <option value="sale">매매</option>
    <option value="jeonse">전세</option>
    <option value="wolse">월세</option>
  </select>

  <label>거래금액 (매매 시)</label>
  <input type="number" id="price" placeholder="단위: 원" />

  <label>보증금 (전세/월세 시)</label>
  <input type="number" id="deposit" placeholder="단위: 원" />

  <label>월세 (월세 시)</label>
  <input type="number" id="monthly" placeholder="단위: 원" />

  <label>협의 수수료율 (%) (선택)</label>
  <input type="number" step="0.01" id="customRate" placeholder="예: 0.5 입력 시 0.5%" />

  <button onclick="calcFee()">계산하기</button>

  <div class="result" id="result">결과가 여기에 표시됩니다.</div>
</div>

<script>
function calcFee() {
  const type = document.getElementById("dealType").value;
  const price = Number(document.getElementById("price").value);
  const deposit = Number(document.getElementById("deposit").value);
  const monthly = Number(document.getElementById("monthly").value);
  const customRate = Number(document.getElementById("customRate").value);

  let baseAmount = 0; // 계산 기준 금액
  let rate = 0;
  let maxFee = null;

  if (type === "sale") {
    baseAmount = price;
    if (baseAmount <= 50000000) { rate = 0.006; maxFee = 250000; }
    else if (baseAmount <= 200000000) { rate = 0.005; }
    else if (baseAmount <= 600000000) { rate = 0.004; }
    else if (baseAmount <= 900000000) { rate = 0.005; } // 협의
    else { rate = 0.009; } // 협의
  } 
  else {
    baseAmount = deposit + (monthly * 100);
    if (baseAmount <= 50000000) { rate = 0.005; maxFee = 200000; }
    else if (baseAmount <= 100000000) { rate = 0.004; }
    else if (baseAmount <= 300000000) { rate = 0.003; }
    else { rate = 0.004; } // 협의
  }

  // 협의 수수료율이 있으면 우선 적용
  if (customRate > 0) {
    rate = customRate / 100;
  }

  let fee = baseAmount * rate;
  if (maxFee && fee > maxFee) fee = maxFee;

  document.getElementById("result").innerText =
    `거래유형: ${type === "sale" ? "매매" : type === "jeonse" ? "전세" : "월세"}\n` +
    `기준금액: ${baseAmount.toLocaleString()} 원\n` +
    `적용수수료율: ${(rate * 100).toFixed(2)}%\n` +
    `예상 중개수수료: ${Math.round(fee).toLocaleString()} 원`;
}
</script>
</body>
</html>
