<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>부동산 중개수수료 계산기</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f7f7f7; margin:0; padding:20px; }
    .container { max-width:500px; margin:0 auto; background:#fff; padding:20px; border-radius:14px; box-shadow:0 4px 8px rgba(0,0,0,0.1);}
    h2 { text-align:center; margin-bottom:20px; }
    .input-group { margin-bottom:15px; }
    label { font-weight:bold; }
    input { width:100%; padding:10px; font-size:16px; margin-top:5px; border:1px solid #ddd; border-radius:8px;}
    .btn-group { display:flex; justify-content:space-between; margin:20px 0; }
    .btn { flex:1; margin:0 5px; padding:12px; font-size:16px; font-weight:bold; border:none; border-radius:8px; cursor:pointer; background:#eee; }
    .btn.active { background:#007bff; color:white; }
    .result { font-size:20px; font-weight:bold; margin-top:20px; text-align:center; }
    .hint { font-size:13px; color:#777; margin-top:8px; text-align:center; }
  </style>
</head>
<body>
  <div class="container">
    <h2>부동산 중개수수료 계산기</h2>

    <div class="input-group">
      <label>부동산 거래 금액 (VAT 제외)</label>
      <input type="number" id="amount" placeholder="금액을 입력하세요">
    </div>

    <div class="btn-group">
      <button class="btn" id="saleBtn">매매</button>
      <button class="btn" id="leaseBtn">전세</button>
      <button class="btn" id="rentBtn">월세</button>
    </div>

    <div class="result" id="result">중개 수수료: -</div>
    <div class="hint">* VAT 별도</div>
  </div>

<script>
  const amountInput = document.getElementById("amount");
  const resultDiv = document.getElementById("result");

  let selectedType = null;

  function calcCommission(type, amount) {
    let rate = 0;
    let maxFee = null;

    if(type === "sale"){ // 매매
      if(amount <= 50000000){ rate = 0.006; maxFee = 250000; }
      else if(amount <= 200000000){ rate = 0.005; }
      else if(amount <= 600000000){ rate = 0.004; }
      else if(amount <= 900000000){ rate = 0.005; } // 협의
      else { rate = 0.009; } // 협의
    }
    else if(type === "lease"){ // 전세
      if(amount <= 50000000){ rate = 0.005; maxFee = 200000; }
      else if(amount <= 100000000){ rate = 0.004; }
      else if(amount <= 300000000){ rate = 0.003; }
      else { rate = 0.004; } // 협의
    }
    else if(type === "rent"){ // 월세 -> 환산보증금 입력받았다고 가정
      if(amount <= 50000000){ rate = 0.005; maxFee = 200000; }
      else if(amount <= 100000000){ rate = 0.004; }
      else if(amount <= 300000000){ rate = 0.003; }
      else { rate = 0.004; } // 협의
    }

    let fee = amount * rate;
    if(maxFee && fee > maxFee) fee = maxFee;

    return Math.round(fee);
  }

  function updateResult(){
    if(!selectedType || !amountInput.value) {
      resultDiv.textContent = "중개 수수료: -";
      return;
    }
    const amount = parseInt(amountInput.value, 10);
    const fee = calcCommission(selectedType, amount);
    resultDiv.textContent = "중개 수수료: " + fee.toLocaleString() + " 원";
  }

  function setActive(btnId, type){
    document.querySelectorAll(".btn").forEach(btn => btn.classList.remove("active"));
    document.getElementById(btnId).classList.add("active");
    selectedType = type;
    updateResult();
  }

  document.getElementById("saleBtn").addEventListener("click", ()=> setActive("saleBtn","sale"));
  document.getElementById("leaseBtn").addEventListener("click", ()=> setActive("leaseBtn","lease"));
  document.getElementById("rentBtn").addEventListener("click", ()=> setActive("rentBtn","rent"));
  amountInput.addEventListener("input", updateResult);
</script>
</body>
</html>
